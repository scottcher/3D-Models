
trackSize	= [78.5, 40, 17];	// 78.5, 42.3, 17


curveSize	= [78.5, 18.21, 1];	// CORRECTED

trackInset	= [trackSize[0] - 7.13 * 2, trackSize[1] + 20, trackSize[2] - 8.8];

difference(){
	union(){
		// Track base object
		translate([0, 0, trackSize[2]/2]) 
			cube(trackSize, center=true);

		// Puzzle male end
		translate([0, trackSize[1]/2, 0]) 
			PuzzleNub4(trackSize[2]);
	}
	// Puzzle female end
	translate([0, -trackSize[1]/2, -0.5]) 
		PuzzleNub4(trackSize[2] + 1);	// +1 to make compile look nice

	translate([0, curveSize[1]/2, trackInset[2]/2 + 8.9])
		cube(trackInset, center=true);

	// Cutoffs to make sure sides are the correct size
	translate([-50 - trackSize[0]/2,0,0]) cube([100,100,100], center=true);
	translate([50 + trackSize[0]/2,0,0]) cube([100,100,100], center=true);		
}


// fourth, much more precise, under testing
module PuzzleNub4(h)
{
	translate([0, 3.99, 0])
	scale([25.4/90, -25.4/90, 1]) union()
	{
		linear_extrude(height=h)
			polygon([[-139.074800,5.314975],[-139.074800,51.377975],[139.074800,51.377975],[139.074800,5.314975],[128.989219,7.325870],[118.254271,9.251496],[105.388578,11.267912],[91.640159,12.983124],[78.257034,14.005136],[72.092462,14.133693],[66.487221,13.941951],[61.597313,13.380912],[57.578740,12.401575],[54.708960,10.403186],[52.518293,8.460942],[50.918967,6.581481],[49.823212,4.771438],[49.143256,3.037449],[48.791329,1.386152],[48.720472,-1.641825],[49.225789,-4.203090],[50.288691,-6.721078],[53.316060,-12.031125],[54.894932,-15.025136],[56.260201,-18.379772],[57.219070,-22.196010],[57.578740,-26.574825],[57.032091,-30.922990],[55.485181,-34.730757],[53.065150,-38.033984],[49.899141,-40.868529],[46.114293,-43.270248],[41.837748,-45.275000],[37.196647,-46.918643],[32.318131,-48.237032],[22.357420,-50.041486],[12.972741,-50.975220],[5.181225,-51.325096],[0.000000,-51.377975],[-5.202375,-51.329326],[-13.045256,-50.989723],[-22.493385,-50.068678],[-32.511504,-48.275706],[-37.410792,-46.961471],[-42.064357,-45.320321],[-46.342790,-43.315947],[-50.116685,-40.912037],[-53.256635,-38.072280],[-55.633232,-34.760367],[-57.117070,-30.939985],[-57.578740,-26.574825],[-57.113552,-22.051074],[-56.050761,-18.177697],[-54.597442,-14.826896],[-52.960667,-11.870875],[-49.965042,-6.631978],[-49.020339,-4.093507],[-48.720472,-1.438625],[-48.958137,1.448814],[-50.003224,4.730013],[-51.067853,6.512638],[-52.621501,8.386942],[-54.759890,10.350672],[-57.578740,12.401575],[-61.562020,13.368173],[-66.425733,13.919758],[-72.012936,14.104988],[-78.166684,13.972525],[-91.546045,12.949155],[-105.308268,11.238925],[-118.197803,9.231114],[-128.959102,7.315000],[-139.074800,5.314975]]);
  }
}
